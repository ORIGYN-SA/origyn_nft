<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="../styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="../origyn_nft_reference/DIP721.html">origyn_nft_reference/DIP721</a></li></li><li><li><a href="../origyn_nft_reference/data.html">origyn_nft_reference/data</a></li></li><li><li><a href="../origyn_nft_reference/dfxtypes.html">origyn_nft_reference/dfxtypes</a></li></li><li><li><a href="../origyn_nft_reference/governance.html">origyn_nft_reference/governance</a></li></li><li><li><a href="../origyn_nft_reference/http.html">origyn_nft_reference/http</a></li></li><li><li><a href="../origyn_nft_reference/kyc.html">origyn_nft_reference/kyc</a></li></li><li><li><a href="../origyn_nft_reference/ledger_interface.html">origyn_nft_reference/ledger_interface</a></li></li><li><li><a href="../origyn_nft_reference/main.html">origyn_nft_reference/main</a></li></li><li><li><a href="../origyn_nft_reference/market.html">origyn_nft_reference/market</a></li></li><li><li><a href="../origyn_nft_reference/metadata.html">origyn_nft_reference/metadata</a></li></li><li><li><a href="../origyn_nft_reference/migrations/lib.html">origyn_nft_reference/migrations/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/types.html">origyn_nft_reference/migrations/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_000_000/lib.html">origyn_nft_reference/migrations/v000_000_000/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_000_000/types.html">origyn_nft_reference/migrations/v000_000_000/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_000/lib.html">origyn_nft_reference/migrations/v000_001_000/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_000/types.html">origyn_nft_reference/migrations/v000_001_000/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_003/lib.html">origyn_nft_reference/migrations/v000_001_003/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_003/types.html">origyn_nft_reference/migrations/v000_001_003/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_004/lib.html">origyn_nft_reference/migrations/v000_001_004/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_004/types.html">origyn_nft_reference/migrations/v000_001_004/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/lib.html">origyn_nft_reference/migrations_storage/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/types.html">origyn_nft_reference/migrations_storage/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_000/lib.html">origyn_nft_reference/migrations_storage/v000_001_000/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_000/types.html">origyn_nft_reference/migrations_storage/v000_001_000/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_003/lib.html">origyn_nft_reference/migrations_storage/v000_001_003/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_003/types.html">origyn_nft_reference/migrations_storage/v000_001_003/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_004/lib.html">origyn_nft_reference/migrations_storage/v000_001_004/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_004/types.html">origyn_nft_reference/migrations_storage/v000_001_004/types</a></li></li><li><li><a href="../origyn_nft_reference/mint.html">origyn_nft_reference/mint</a></li></li><li><li><a href="../origyn_nft_reference/owner.html">origyn_nft_reference/owner</a></li></li><li><li><a href="../origyn_nft_reference/storage_http.html">origyn_nft_reference/storage_http</a></li></li><li><li><a href="../origyn_nft_reference/storage_store.html">origyn_nft_reference/storage_store</a></li></li><li><li><a href="../origyn_nft_reference/types.html">origyn_nft_reference/types</a></li></li><li><li><a href="../origyn_nft_reference/utils.html">origyn_nft_reference/utils</a></li></li><li><li><a href="../origyn_sale_reference/main.html">origyn_sale_reference/main</a></li></li><li><li><a href="../origyn_sale_reference/types.html">origyn_sale_reference/types</a></li></li><li><li><a href="../origyn_storage_reference/storage_canister.html">origyn_storage_reference/storage_canister</a></li></li><li><li><a href="../tests/all_ref.html">tests/all_ref</a></li></li><li><li><a href="../tests/canister_creator.html">tests/canister_creator</a></li></li><li><li><a href="../tests/storage_creator.html">tests/storage_creator</a></li></li><li><li><a href="../tests/test_runner.html">tests/test_runner</a></li></li><li><li><a href="../tests/test_runner_collection.html">tests/test_runner_collection</a></li></li><li><li><a href="../tests/test_runner_data.html">tests/test_runner_data</a></li></li><li><li><a href="../tests/test_runner_instant_transfer.html">tests/test_runner_instant_transfer</a></li></li><li><li><a href="../tests/test_runner_nft.html">tests/test_runner_nft</a></li></li><li><li><a href="../tests/test_runner_nft_2.html">tests/test_runner_nft_2</a></li></li><li><li><a href="../tests/test_runner_sale.html">tests/test_runner_sale</a></li></li><li><li><a href="../tests/test_runner_storage.html">tests/test_runner_storage</a></li></li><li><li><a href="../tests/test_runner_utils.html">tests/test_runner_utils</a></li></li><li><li><a href="../tests/test_utils.html">tests/test_utils</a></li></li><li><li><a href="../tests/test_wallet.html">tests/test_wallet</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#find_escrow_reciept">find_escrow_reciept</a></li></li><li><li><a href="#verify_escrow_receipt">verify_escrow_receipt</a></li></li><li><li><a href="#verify_sales_reciept">verify_sales_reciept</a></li></li><li><li><a href="#is_token_on_sale">is_token_on_sale</a></li></li><li><li><a href="#open_sale_nft_origyn">open_sale_nft_origyn</a></li></li><li><li><a href="#sale_status_nft_origyn">sale_status_nft_origyn</a></li></li><li><li><a href="#active_sales_nft_origyn">active_sales_nft_origyn</a></li></li><li><li><a href="#history_sales_nft_origyn">history_sales_nft_origyn</a></li></li><li><li><a href="#deposit_info_nft_origyn">deposit_info_nft_origyn</a></li></li><li><li><a href="#end_sale_nft_origyn">end_sale_nft_origyn</a></li></li><li><li><a href="#distribute_sale">distribute_sale</a></li></li><li><li><a href="#put_escrow_balance">put_escrow_balance</a></li></li><li><li><a href="#put_sales_balance">put_sales_balance</a></li></li><li><li><a href="#market_transfer_nft_origyn_async">market_transfer_nft_origyn_async</a></li></li><li><li><a href="#get_network_royalty_account">get_network_royalty_account</a></li></li><li><li><a href="#market_transfer_nft_origyn">market_transfer_nft_origyn</a></li></li><li><li><a href="#refresh_offers_nft_origyn">refresh_offers_nft_origyn</a></li></li><li><li><a href="#escrow_nft_origyn">escrow_nft_origyn</a></li></li><li><li><a href="#withdraw_nft_origyn">withdraw_nft_origyn</a></li></li><li><li><a href="#bid_nft_origyn">bid_nft_origyn</a></li></li></ul></nav><div class="documentation"><h1>origyn_nft_reference/market</h1><div class="declaration"><h4 class="function" id="find_escrow_reciept"><code><span class="keyword">public func </span><span class="fnname">find_escrow_reciept</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">buyer</span> : <a href="types.html#type.Account"><span class="type">Types.Account</span></a>, <br/>  <span class="parameter">seller</span> : <a href="types.html#type.Account"><span class="type">Types.Account</span></a>, <br/>  <span class="parameter">token_id</span> : <span class="type">Text</span><br/>) : <span class="type">Result.Result</span>&lt;<a href="migrations/types.html#Current.type.EscrowLedgerTrie"><span class="type">MigrationTypes.Current.EscrowLedgerTrie</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Searches the escrow receipts to find if the buyer/seller/token_id tuple has a balance on file.<ul><li>@param {StateAccess} state - The state access object.</li><li>@param {Types.Account} buyer - The buyer's account.</li><li>@param {Types.Account} seller - The seller's account.</li><li>@param {Text} token_id - The token ID.</li><li>@returns {Result.Result&lt;MigrationTypes.Current.EscrowLedgerTrie, Types.OrigynError&gt;} - Either the escrow ledger trie or an error.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="verify_escrow_receipt"><code><span class="keyword">public func </span><span class="fnname">verify_escrow_receipt</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">escrow</span> : <a href="types.html#type.EscrowReceipt"><span class="type">Types.EscrowReceipt</span></a>, <br/>  <span class="parameter">owner</span> : ?<a href="types.html#type.Account"><span class="type">Types.Account</span></a>, <br/>  <span class="parameter">sale_id</span> : ?<span class="type">Text</span><br/>) : <span class="type">Result.Result</span>&lt;<a href="migrations/types.html#Current.type.VerifiedReciept"><span class="type">MigrationTypes.Current.VerifiedReciept</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Verifies an escrow receipt to determine whether a buyer/seller/token_id tuple has a balance on file.<ul><li>@param {StateAccess} state - The state access object.</li><li>@param {Types.EscrowReceipt} escrow - The escrow receipt to verify.</li><li>@param {?Types.Account} owner - The owner of the asset.</li><li>@param {?Text} sale_id - The sale id.</li><li>@returns {Result.Result&lt;MigrationTypes.Current.VerifiedReciept, Types.OrigynError&gt;} Returns a Result object that contains a MigrationTypes.Current.VerifiedReciept object if successful, otherwise it contains a Types.OrigynError object.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="verify_sales_reciept"><code><span class="keyword">public func </span><span class="fnname">verify_sales_reciept</span>(<span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <span class="parameter">escrow</span> : <a href="types.html#type.EscrowReceipt"><span class="type">Types.EscrowReceipt</span></a>) : <span class="type">Result.Result</span>&lt;<a href="migrations/types.html#Current.type.VerifiedReciept"><span class="type">MigrationTypes.Current.VerifiedReciept</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Verifies that a revenue receipt is in the NFT Canister.<ul><li>@param {StateAccess} state - State access object.</li><li>@param {Types.EscrowReceipt} escrow - The revenue receipt to verify.</li><li>@returns {Result.Result&lt;MigrationTypes.Current.VerifiedReceipt, Types.OrigynError&gt;} - A Result type containing either a verified receipt or an error.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="is_token_on_sale"><code><span class="keyword">public func </span><span class="fnname">is_token_on_sale</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">metadata</span> : <span class="type">CandyTypes.CandyShared</span>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="type">Result.Result</span>&lt;<span class="type">Bool</span>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Checks if a token is currently on sale.<ul><li>@param {StateAccess} state - State access object.</li><li>@param {CandyTypes.CandyShared} metadata - The metadata for the token.</li><li>@param {Principal} caller - The caller of the function.</li><li>@returns {Types.OrigynBoolResult} - A Result type containing either a boolean indicating whether the token is on sale or an error.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="open_sale_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">open_sale_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">token_id</span> : <span class="type">Text</span>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="type">Result.Result</span>&lt;<a href="types.html#type.ManageSaleResponse"><span class="type">Types.ManageSaleResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Opens a sale for an NFT if it is past the date.<ul><li>@param {StateAccess} state - The state of the contract.</li><li>@param {Text} token_id - The ID of the NFT.</li><li>@param {Principal} caller - The caller principal.</li><li>@returns {Result.Result&lt;Types.ManageSaleResponse,Types.OrigynError&gt;} - A <code>Result</code> object that either contains a <code>Types.ManageSaleResponse</code> object or a <code>Types.OrigynError</code> object.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="sale_status_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">sale_status_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">sale_id</span> : <span class="type">Text</span>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="type">Result.Result</span>&lt;<a href="types.html#type.SaleInfoResponse"><span class="type">Types.SaleInfoResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Reports information about a sale.<ul><li>@param {StateAccess} state - The state of the contract.</li><li>@param {Text} sale_id - The ID of the sale.</li><li>@param {Principal} caller - The caller principal.</li><li>@returns {Result.Result&lt;Types.SaleInfoResponse,Types.OrigynError&gt;} - A <code>Result</code> object that either contains a <code>Types.SaleInfoResponse</code> object or a <code>Types.OrigynError</code> object.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="active_sales_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">active_sales_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">pages</span> : ?(<span class="type">Nat</span>, <span class="type">Nat</span>), <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="type">Result.Result</span>&lt;<a href="types.html#type.SaleInfoResponse"><span class="type">Types.SaleInfoResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Returns active sales on a canister<ul><li></li><li>@param {StateAccess} state - The state of the canister</li><li>@param {Array.&lt;number&gt;} pages - Optional tuple of start page and page size.</li><li>@param {Principal} caller - The principal of the caller.</li><li>@returns {Result.Result.&lt;Types.SaleInfoResponse,Types.OrigynError&gt;} - A <code>Result</code> object that either contains the sale information as a <code>Types.SaleInfoResponse</code> object or an error as a <code>Types.OrigynError</code> object.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="history_sales_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">history_sales_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">pages</span> : ?(<span class="type">Nat</span>, <span class="type">Nat</span>), <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="type">Result.Result</span>&lt;<a href="types.html#type.SaleInfoResponse"><span class="type">Types.SaleInfoResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Returns a history of sales.<ul><li></li><li>@param {StateAccess} state - StateAccess object for accessing the canister's state.</li><li>@param {?(Nat, Nat)} pages - Optional tuple of pagination information in the form (start index, page size).</li><li>@param {Principal} caller - Principal of the caller making the request.</li><li>@returns {Result.Result&lt;Types.SaleInfoResponse,Types.OrigynError&gt;} - A result containing a history of sales.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="deposit_info_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">deposit_info_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">request</span> : ?<a href="types.html#type.Account"><span class="type">Types.Account</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="type">Result.Result</span>&lt;<a href="types.html#type.SaleInfoResponse"><span class="type">Types.SaleInfoResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Returns an invoice or details of where a user can send their deposits on a standard ledger.<ul><li></li><li>@param {StateAccess} state - StateAccess object for accessing the canister's state.</li><li>@param {?Types.Account} request - Optional account information for the request.</li><li>@param {Principal} caller - Principal of the caller making the request.</li><li>@returns {Result.Result&lt;Types.SaleInfoResponse,Types.OrigynError&gt;} - A result containing the invoice or deposit information.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="end_sale_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">end_sale_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">token_id</span> : <span class="type">Text</span>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;<a href="types.html#type.ManageSaleResponse"><span class="type">Types.ManageSaleResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="distribute_sale"><code><span class="keyword">public func </span><span class="fnname">distribute_sale</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">request</span> : <a href="types.html#type.DistributeSaleRequest"><span class="type">Types.DistributeSaleRequest</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;<a href="types.html#type.ManageSaleResponse"><span class="type">Types.ManageSaleResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Distributes a sale to the appropriate buyers by adding withdrawal requests to a buffer. <ul><li></li><li>@param {StateAccess} state - The state access object.</li><li>@param {Types.DistributeSaleRequest} request - The request containing the seller information.</li><li>@param {Principal} caller - The caller principal.</li><li></li><li>@returns {async* Types.ManageSaleResult} - The result of the sale distribution.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="put_escrow_balance"><code><span class="keyword">public func </span><span class="fnname">put_escrow_balance</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">escrow</span> : <a href="types.html#type.EscrowRecord"><span class="type">Types.EscrowRecord</span></a>, <br/>  <span class="parameter">append</span> : <span class="type">Bool</span><br/>) : <a href="types.html#type.EscrowRecord"><span class="type">Types.EscrowRecord</span></a></code></h4><p><ul><li>Processes a change in escrow balance.<ul><li></li><li>@param {StateAccess} state - The state access object.</li><li>@param {Types.EscrowRecord} escrow - The escrow record to be processed.</li><li>@param {Bool} append - Determines whether to append the balance to the ledger or not.</li><li></li><li>@returns {Types.EscrowRecord} - The updated escrow record.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="put_sales_balance"><code><span class="keyword">public func </span><span class="fnname">put_sales_balance</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">sale_balance</span> : <a href="types.html#type.EscrowRecord"><span class="type">Types.EscrowRecord</span></a>, <br/>  <span class="parameter">append</span> : <span class="type">Bool</span><br/>) : <a href="types.html#type.EscrowRecord"><span class="type">Types.EscrowRecord</span></a></code></h4><p><ul><li>Processes a changing sale balance.<ul><li></li><li>@param {StateAccess} state - The state access object.</li><li>@param {Types.EscrowRecord} sale_balance - The sale balance to be processed.</li><li>@param {Bool} append - Determines whether to append the balance to the ledger or not.</li><li></li><li>@returns {Types.EscrowRecord} - The updated sale balance.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="market_transfer_nft_origyn_async"><code><span class="keyword">public func </span><span class="fnname">market_transfer_nft_origyn_async</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">request</span> : <a href="types.html#type.MarketTransferRequest"><span class="type">Types.MarketTransferRequest</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;<a href="types.html#type.MarketTransferRequestReponse"><span class="type">Types.MarketTransferRequestReponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Handles async market transfer operations like instant where interaction with other canisters is required<ul><li>@param {StateAccess} state - StateAccess instance representing the state of the canister</li><li>@param {Types.MarketTransferRequest} request - MarketTransferRequest object containing the details of the transfer</li><li>@param {Principal} caller - Principal object representing the caller</li><li>@returns {AsyncGenerator&lt;Types.MarketTransferResult&gt;} An async generator that yields a Result object representing the result of the transfer operation</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="get_network_royalty_account"><code><span class="keyword">public func </span><span class="fnname">get_network_royalty_account</span>(<span class="parameter">principal</span> : <span class="type">Principal</span>) : [<span class="type">Nat8</span>]</code></h4><p><ul><li>Calculates the network royalty account for a given principal.<ul><li></li><li>@param {Principal} principal - The principal for which to calculate the network royalty account.</li><li></li><li>@returns {Array&lt;Nat8&gt;} An array of 8-bit natural numbers representing the calculated network royalty account.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="market_transfer_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">market_transfer_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">request</span> : <a href="types.html#type.MarketTransferRequest"><span class="type">Types.MarketTransferRequest</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;<a href="types.html#type.MarketTransferRequestReponse"><span class="type">Types.MarketTransferRequestReponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Processes royalties for a given escrow transaction and updates state accordingly.<ul><li>@param {StateAccess} state - The current state of the application.</li><li>@param {Object} request - An object containing the necessary information for royalty processing.</li><li>@param {Nat} request.remaining - The amount of remaining royalty to be paid.</li><li>@param {Nat} request.total - The total amount of royalty to be paid.</li><li>@param {Nat} request.fee - The fee to be paid for processing royalty.</li><li>@param {?Blob} request.account_hash - An optional hash of the account for which royalty is being paid.</li><li>@param {[CandyTypes.CandyShared]} request.royalty - The array of royalty being paid.</li><li>@param {Types.EscrowReceipt} request.escrow - The escrow receipt associated with the transaction.</li><li>@param {?Principal} request.broker_id - The broker ID associated with the transaction.</li><li>@param {?Principal} request.original_broker_id - The original broker ID associated with the transaction.</li><li>@param {?Text} request.sale_id - The sale ID associated with the transaction.</li><li>@param {CandyTypes.CandyShared} request.metadata - The metadata associated with the transaction.</li><li>@param {?Text} request.token_id - The token ID associated with the transaction.</li><li>@param {Types.TokenSpec} request.token - The token specification associated with the transaction.</li><li>@param {Principal} caller - The principal that initiated the transaction.</li><li>@returns {[Nat, [Types.EscrowRecord]]} A tuple containing the remaining royalty amount and an array of EscrowRecords.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="refresh_offers_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">refresh_offers_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">request</span> : ?<a href="types.html#type.Account"><span class="type">Types.Account</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <a href="types.html#type.ManageSaleResult"><span class="type">Types.ManageSaleResult</span></a></code></h4><p></p></div><div class="declaration"><h4 class="function" id="escrow_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">escrow_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">request</span> : <a href="types.html#type.EscrowRequest"><span class="type">Types.EscrowRequest</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;<a href="types.html#type.ManageSaleResponse"><span class="type">Types.ManageSaleResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p></p></div><div class="declaration"><h4 class="function" id="withdraw_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">withdraw_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">withdraw</span> : <a href="types.html#type.WithdrawRequest"><span class="type">Types.WithdrawRequest</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;<a href="types.html#type.ManageSaleResponse"><span class="type">Types.ManageSaleResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Allows the user to withdraw tokens from an NFT canister.<ul><li>@param {StateAccess} state - The StateAccess instance of the NFT canister.</li><li>@param {Types.WithdrawRequest} withdraw - The withdraw request details containing token information.</li><li>@param {Principal} caller - The Principal of the caller.</li><li>@returns {async* Types.ManageSaleResult} - A Result object containing either a ManageSaleResponse or an OrigynError.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="bid_nft_origyn"><code><span class="keyword">public func </span><span class="fnname">bid_nft_origyn</span>(<br/>  <span class="parameter">state</span> : <a href="#type.StateAccess"><span class="type">StateAccess</span></a>, <br/>  <span class="parameter">request</span> : <a href="types.html#type.BidRequest"><span class="type">Types.BidRequest</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">canister_call</span> : <span class="type">Bool</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;<a href="types.html#type.ManageSaleResponse"><span class="type">Types.ManageSaleResponse</span></a>, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Allows bids on auctions. Verifies auction status, seller, buyer, token ownership, and bid amount before allowing a bid. <ul><li>If the bid is too low, it will refund the escrow. If the auction is already closed, it will attempt to refund the bid.</li><li>If the escrow cannot be verified, it will try to claim it first. </li><li></li><li>@param {StateAccess} state - The state of the canister.</li><li>@param {Types.BidRequest} request - The bid request containing the token id and escrow receipt.</li><li>@param {Principal} caller - The principal of the caller.</li><li>@param {Bool} canister_call - Determines if the function is being called from another function within the canister.</li><li>@returns {Types.ManageSaleResult} A result indicating either a successful bid or an error message.</li></ul></li></ul></p></div></div></body></html>