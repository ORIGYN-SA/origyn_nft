<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="../styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="../origyn_nft_reference/DIP721.html">origyn_nft_reference/DIP721</a></li></li><li><li><a href="../origyn_nft_reference/data.html">origyn_nft_reference/data</a></li></li><li><li><a href="../origyn_nft_reference/dfxtypes.html">origyn_nft_reference/dfxtypes</a></li></li><li><li><a href="../origyn_nft_reference/governance.html">origyn_nft_reference/governance</a></li></li><li><li><a href="../origyn_nft_reference/http.html">origyn_nft_reference/http</a></li></li><li><li><a href="../origyn_nft_reference/kyc.html">origyn_nft_reference/kyc</a></li></li><li><li><a href="../origyn_nft_reference/ledger_interface.html">origyn_nft_reference/ledger_interface</a></li></li><li><li><a href="../origyn_nft_reference/main.html">origyn_nft_reference/main</a></li></li><li><li><a href="../origyn_nft_reference/market.html">origyn_nft_reference/market</a></li></li><li><li><a href="../origyn_nft_reference/metadata.html">origyn_nft_reference/metadata</a></li></li><li><li><a href="../origyn_nft_reference/migrations/lib.html">origyn_nft_reference/migrations/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/types.html">origyn_nft_reference/migrations/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_000_000/lib.html">origyn_nft_reference/migrations/v000_000_000/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_000_000/types.html">origyn_nft_reference/migrations/v000_000_000/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_000/lib.html">origyn_nft_reference/migrations/v000_001_000/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_000/types.html">origyn_nft_reference/migrations/v000_001_000/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_003/lib.html">origyn_nft_reference/migrations/v000_001_003/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_003/types.html">origyn_nft_reference/migrations/v000_001_003/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_004/lib.html">origyn_nft_reference/migrations/v000_001_004/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations/v000_001_004/types.html">origyn_nft_reference/migrations/v000_001_004/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/lib.html">origyn_nft_reference/migrations_storage/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/types.html">origyn_nft_reference/migrations_storage/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_000/lib.html">origyn_nft_reference/migrations_storage/v000_001_000/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_000/types.html">origyn_nft_reference/migrations_storage/v000_001_000/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_003/lib.html">origyn_nft_reference/migrations_storage/v000_001_003/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_003/types.html">origyn_nft_reference/migrations_storage/v000_001_003/types</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_004/lib.html">origyn_nft_reference/migrations_storage/v000_001_004/lib</a></li></li><li><li><a href="../origyn_nft_reference/migrations_storage/v000_001_004/types.html">origyn_nft_reference/migrations_storage/v000_001_004/types</a></li></li><li><li><a href="../origyn_nft_reference/mint.html">origyn_nft_reference/mint</a></li></li><li><li><a href="../origyn_nft_reference/owner.html">origyn_nft_reference/owner</a></li></li><li><li><a href="../origyn_nft_reference/storage_http.html">origyn_nft_reference/storage_http</a></li></li><li><li><a href="../origyn_nft_reference/storage_store.html">origyn_nft_reference/storage_store</a></li></li><li><li><a href="../origyn_nft_reference/types.html">origyn_nft_reference/types</a></li></li><li><li><a href="../origyn_nft_reference/utils.html">origyn_nft_reference/utils</a></li></li><li><li><a href="../origyn_sale_reference/main.html">origyn_sale_reference/main</a></li></li><li><li><a href="../origyn_sale_reference/types.html">origyn_sale_reference/types</a></li></li><li><li><a href="../origyn_storage_reference/storage_canister.html">origyn_storage_reference/storage_canister</a></li></li><li><li><a href="../tests/all_ref.html">tests/all_ref</a></li></li><li><li><a href="../tests/canister_creator.html">tests/canister_creator</a></li></li><li><li><a href="../tests/storage_creator.html">tests/storage_creator</a></li></li><li><li><a href="../tests/test_runner.html">tests/test_runner</a></li></li><li><li><a href="../tests/test_runner_collection.html">tests/test_runner_collection</a></li></li><li><li><a href="../tests/test_runner_data.html">tests/test_runner_data</a></li></li><li><li><a href="../tests/test_runner_instant_transfer.html">tests/test_runner_instant_transfer</a></li></li><li><li><a href="../tests/test_runner_nft.html">tests/test_runner_nft</a></li></li><li><li><a href="../tests/test_runner_nft_2.html">tests/test_runner_nft_2</a></li></li><li><li><a href="../tests/test_runner_sale.html">tests/test_runner_sale</a></li></li><li><li><a href="../tests/test_runner_storage.html">tests/test_runner_storage</a></li></li><li><li><a href="../tests/test_runner_utils.html">tests/test_runner_utils</a></li></li><li><li><a href="../tests/test_utils.html">tests/test_utils</a></li></li><li><li><a href="../tests/test_wallet.html">tests/test_wallet</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.Ledger_Interface">Ledger_Interface</a></li></li></ul></nav><div class="documentation"><h1>origyn_nft_reference/ledger_interface</h1><div class="declaration"><h4 class="class-declaration" id="type.Ledger_Interface"><span class="keyword">class </span><span class="classname">Ledger_Interface</span>()</h4><div class="declaration"><h4 class="function" id="Ledger_Interface.transfer_deposit"><code><span class="keyword">public func </span><span class="fnname">transfer_deposit</span>(<br/>  <span class="parameter">host</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">escrow</span> : <a href="types.html#type.EscrowRequest"><span class="type">Types.EscrowRequest</span></a>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;{ transaction_id : <a href="types.html#type.TransactionID"><span class="type">Types.TransactionID</span></a>; subaccount_info : <a href="types.html#type.SubAccountInfo"><span class="type">Types.SubAccountInfo</span></a> }, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Moves a deposit from a deposit subaccount to an escrow subaccount<ul><li>@param {Principal} host - The canister ID of the ledger that manages the deposit</li><li>@param {Types.EscrowRequest} escrow - The deposit request to be transferred to an escrow account</li><li>@param {Principal} caller - The principal that initiated the transfer deposit request</li><li>@returns {async* Result.Result&lt;{transaction_id: Types.TransactionID; subaccount_info: Types.SubAccountInfo}, Types.OrigynError&gt;} The result of the transfer deposit operation containing the transaction ID and subaccount information if successful, or an error if unsuccessful.</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="Ledger_Interface.transfer_sale"><code><span class="keyword">public func </span><span class="fnname">transfer_sale</span>(<br/>  <span class="parameter">host</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">escrow</span> : <a href="types.html#type.EscrowReceipt"><span class="type">Types.EscrowReceipt</span></a>, <br/>  <span class="parameter">token_id</span> : <span class="type">Text</span>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;(<a href="types.html#type.TransactionID"><span class="type">Types.TransactionID</span></a>, <a href="types.html#type.SubAccountInfo"><span class="type">Types.SubAccountInfo</span></a>, <span class="type">Nat</span>), <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>allows a user to withdraw money from a sale<ul><li>@param {Principal} host - the principal hosting the ledger</li><li>@param {Types.EscrowReceipt} escrow - the escrow receipt object</li><li>@param {Text} token_id - the id of the token</li><li>@param {Principal} caller - the principal making the call</li><li>@returns {async* Result.Result&lt;(Types.TransactionID, Types.SubAccountInfo, Nat), Types.OrigynError&gt;} a result object containing the transaction ID, subaccount info, and fee or an error object</li></ul></li></ul></p></div><div class="declaration"><h4 class="function" id="Ledger_Interface.send_payment_minus_fee"><code><span class="keyword">public func </span><span class="fnname">send_payment_minus_fee</span>(<br/>  <span class="parameter">account</span> : <a href="types.html#type.Account"><span class="type">Types.Account</span></a>, <br/>  <span class="parameter">token</span> : <a href="types.html#type.ICTokenSpec"><span class="type">Types.ICTokenSpec</span></a>, <br/>  <span class="parameter">amount</span> : <span class="type">Nat</span>, <br/>  <span class="parameter">sub_account</span> : ?<span class="type">Blob</span>, <br/>  <span class="parameter">caller</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async* </span><span class="type">Result.Result</span>&lt;{ trx_id : <a href="types.html#type.TransactionID"><span class="type">Types.TransactionID</span></a>; fee : <span class="type">Nat</span> }, <a href="types.html#type.OrigynError"><span class="type">Types.OrigynError</span></a>&gt;</code></h4><p><ul><li>Sends a payment and withdraws a fee from an account.
 *<ul><li>@param {object} account - An object containing information about the account.</li><li>@param {Types.ICTokenSpec} token - The token to be transferred.</li><li>@param {number} amount - The amount of the token to be transferred.</li><li>@param {Array.&lt;number&gt;} [sub_account=null] - The subaccount associated with the account.</li><li>@param {Principal} caller - The principal of the caller.</li><li>@returns {Promise.&lt;Result.Result&gt;} A promise that returns either an ok result containing the transaction ID and the fee of the transfer or an error containing information about the failed transfer.</li></ul></li></ul></p></div><p></p></div></div></body></html>